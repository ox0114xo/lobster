<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éŠ˜éŠ˜å°ˆå±¬ - é¾è¦æ§åˆ¶ä¸­å¿ƒ</title>
    <style>
        body { background: #0f172a; color: #f8fafc; font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; }
        .card { background: #1e293b; padding: 2rem; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.5); text-align: center; width: 90%; max-width: 400px; border: 1px solid #334155; }
        h1 { font-size: 1.5rem; margin-bottom: 0.5rem; color: #38bdf8; }
        .status-box { background: #0f172a; padding: 1rem; border-radius: 10px; margin: 1.5rem 0; border: 1px solid #334155; }
        .status-text { font-size: 1.2rem; font-weight: bold; }
        .on { color: #4ade80; text-shadow: 0 0 10px #166534; }
        .off { color: #f87171; text-shadow: 0 0 10px #991b1b; }
        .btn-group { display: flex; gap: 1rem; flex-direction: column; }
        button { padding: 1.2rem; border: none; border-radius: 12px; font-size: 1.1rem; font-weight: bold; cursor: pointer; transition: 0.3s; color: white; }
        .btn-start { background: linear-gradient(135deg, #22c55e, #166534); box-shadow: 0 4px 15px rgba(34, 197, 94, 0.4); }
        .btn-stop { background: linear-gradient(135deg, #ef4444, #991b1b); box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4); }
        button:active { transform: scale(0.95); opacity: 0.8; }
        .footer { margin-top: 1rem; font-size: 0.8rem; color: #64748b; }
    </style>
</head>
<body>
    <div class="card">
        <h1>ğŸ¦ éŠ˜éŠ˜å°±å¾ˆå¸¥ - æ§åˆ¶å°</h1>
        <p>åº§æ¨™é–å®šï¼š2963, 1188</p>
        
        <div class="status-box">
            <span>ç•¶å‰ç‹€æ…‹ï¼š</span>
            <span id="status" class="status-text off">è®€å–ä¸­...</span>
        </div>

        <div class="btn-group">
            <button class="btn-start" onclick="sendSignal('ON')">âš¡ å•Ÿå‹•è‡ªå‹•é€£ç™¼</button>
            <button class="btn-stop" onclick="sendSignal('OFF')">ğŸ›‘ åœæ­¢é»æ“Š</button>
        </div>
        
        <div class="footer">é€£å‹•è¨­å‚™ï¼šXiaoMi Mobile (Termux)</div>
    </div>

    <script>
        const GIST_URL = "https://gist.githubusercontent.com/ox0114xo/94acdb8bea0ceb153a79fce5422f9a21/raw/signal.txt";

        // æ¯ 3 ç§’è‡ªå‹•æ›´æ–°ä¸€æ¬¡é é¢ä¸Šçš„ç‹€æ…‹
        async function updateStatus() {
            try {
                const r = await fetch(GIST_URL + '?t=' + Date.now());
                const status = await r.text();
                const el = document.getElementById('status');
                el.innerText = status.trim().toUpperCase();
                el.className = 'status-text ' + (status.trim().toUpperCase() === 'ON' ? 'on' : 'off');
            } catch (e) {}
        }

        async function sendSignal(val) {
            const btn = event.target;
            btn.innerText = "å‚³é€ä¸­...";
            await fetch('/api/toggle', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ status: val })
            });
            btn.innerText = (val === 'ON' ? 'âš¡ å•Ÿå‹•è‡ªå‹•é€£ç™¼' : 'ğŸ›‘ åœæ­¢é»æ“Š');
            updateStatus();
        }

        setInterval(updateStatus, 3000);
        updateStatus();
    </script>
</body>
</html>
